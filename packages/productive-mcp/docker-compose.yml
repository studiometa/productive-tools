# Docker Compose for local development/testing
#
# Build from local source (useful before npm publish):
#   docker compose up --build
#
# For production, use the published npm package:
#   docker compose -f docker-compose.prod.yml up

services:
  productive-mcp:
    build:
      context: ../..
      dockerfile: packages/productive-mcp/Dockerfile.dev
    ports:
      - '3000:3000'
    environment:
      PORT: 3000
      HOST: 0.0.0.0
    restart: unless-stopped
    healthcheck:
      test: ['CMD', 'wget', '--no-verbose', '--tries=1', '--spider', 'http://localhost:3000/health']
      interval: 30s
      timeout: 3s
      start_period: 5s
      retries: 3
